#!/bin/sh /etc/rc.common
START=99
STOP=10

PROG=/usr/local/bin/diskio-api
HOST=0.0.0.0
PORT=8080
PIDFILE=/var/run/diskio-api.pid

USE_PROCD=1
start_service() {
    [ -x "$PROG" ] || {
        echo "binary not found: $PROG"
        return 1
    }

    procd_open_instance
    procd_set_param command "$PROG" --host "$HOST" --port "$PORT"
    procd_set_param respawn
    procd_set_param stdout 1
    procd_set_param stderr 1
    procd_set_param pidfile "$PIDFILE"
    procd_close_instance
}

stop_service() {
    :
}